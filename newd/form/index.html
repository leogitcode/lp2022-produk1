<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>
    <title>Form</title>
</head>
<body>
    <div class="container-sm" style="max-width: 550px;">
        <div class="p-3 mt-3">
            <img id="imgheader" src="" style="width: 100%;border-radius: 10px;border: 1px solid #000000;">
        </div>
        <div class="p-3">
            <p class="text-center mt-3" style="font-size: 24px;"><b id="title">Data Penerima:</b></p>
            <form action="/loading1/" class="needs-validation" method="get" novalidate>
                <!-- id -->
                <input type="text" class="form-control" id="id" name="id" value="" style="display: none;" required>
                <div class="mt-0">
                    <!-- Nama -->
                    <input type="text" class="form-control" id="nama" name="nama" placeholder="Nama Anda" required>
                </div>
                <div class="mt-3">
                    <!-- Nomor WA -->
                    <input type="number" class="form-control" id="nomor" name="nomor" placeholder="Nomor WA" required>
                </div>
                <div class="mt-3">
                    <!-- Alamat -->
                    <textarea class="form-control" rows="4" id="alamat" name="alamat" placeholder="Alamat lengkap (Berisi : nama jalan, nomor rumah, RT/RW, patokan)" required></textarea>
                </div>
                <div class="mt-3">
                    <!-- Provinsi -->
                    <select class="form-control" id="provinsi" name="provinsi" required>
                        <option selected value="">- Pilih Provinsi -</option>
                    </select>
                </div>
                <div class="mt-3">
                    <!-- Kotkab -->
                    <select class="form-control" id="kotkab" name="kotkab" required>
                        <option selected value="">- Pilih Kota / Kabupaten -</option>
                    </select>
                </div>
                <div class="mt-3">
                    <!-- Kecamatan -->
                    <select class="form-control" id="kecamatan" name="kecamatan" required>
                        <option selected value="">- Pilih Kecamatan -</option>
                    </select>
                </div>
                <!-- tanggalSampai -->
                <input type="text" class="form-control" id="tanggalSampai" name="tanggalSampai" value="" style="display: none;" required>
                <!-- rincian pesanan -->
                <div class="mt-3 p-1" style="background-color: #d3ffe0;border-radius: 10px;border: dashed 1px #008629;font-size: 14px;">
                    <div class="text-center p-2"><b>RINCIAN PESANAN :</b></div>
                    <table class="table">
                        <tr>
                            <td id="namapaket"></td>
                            <td id="hargapaket" class="text-center"></td>
                        </tr>
                    </table>
                </div>
                <!-- Submit -->
                <button id="btncustom" class="btn btn-block btn-lg mt-3 p-3" type="submit" style="color: #FFFFFF;"><i class="fas fa-cart-arrow-down"></i> <b>Pesan Sekarang</b></button>
            </form>
            

        </div>
        <div class="my-5">
            <div class="p-3 card" style="border: dotted 2px rgba(0, 0, 0, 0.568);">
                <p class="text-center"><b>BUTUH BANTUAN?</b></p>
                <div class="text-center"><img src="/cs.jpg" style="width: 100%;max-width: 220px;"></div>
                <p class="text-center" style="font-size: 14px;">Bingung atau mengalami masalah dalam pemesanan menggunakan form di atas? <br/>Tekan tombol di bawah ini untuk melakukan pemesanan secara manual via whatsapp</p>
                <a id="walink" class="text-decoration-none btn btn-block btn-lg p-3" style="background-color: #64b161;color: #FFFFFF;"><img src="/wa.png" style="width: 25px;"> <b>Pesan via Whatsapp</b></a>
            </div>
        </div>
    </div>
    <script>
        var url_string = window.location.href;
        var url = new URL(url_string);
        var id = url.searchParams.get("id");
        if (id === "1") {
            var img = "/1btl.gif"; 
            var paket = "Herbal Ar-Rijal 1 btl";
            var paketwa = "Herbal Ar-Rijal 1 btl";
            var haret = "<span style=\"color:red;\"><s><b>Rp95.000</b></s></span>";
            var hrg = "<b>Rp85.000</b><br/>(Belum termasuk ongkir)";
            var bgcol = "#008629";
        } else if (id === "3") {
            var img = "/3btl.gif"; 
            var paket = "<b>PAKET THREESOME</b><br/>Herbal Ar-Rijal 3 btl<br/>+ Bonus Hajar Jahanam 1 btl";
            var paketwa = "PAKET THREESOME Herbal Ar-Rijal 3 btl %2b Bonus Hajar Jahanam 1 btl";
            var haret = "<span style=\"color:red;\"><s><b>Rp225.000</b></s></span>";
            var hrg = "<b>Rp198.000</b><br/>(Gratis ongkir)";
            var bgcol = "#1565c0";
        } else if (id === "6") {
            var img = "/6btl.gif"; 
            var paket = "<b>PAKET GANGBANG</b><br/>Herbal Ar-Rijal 6 btl<br/>+ Bonus Hajar Jahanam 2 btl";
            var paketwa = "PAKET GANGBANG Herbal Ar-Rijal 6 btl %2b Bonus Hajar Jahanam 2 btl";
            var haret = "<span style=\"color:red;\"><s><b>Rp510.000</b></s></span>";
            var hrg = "<b>Rp348.000</b><br/>(Gratis ongkir)";
            var bgcol = "#e65100";
        } else if (id === "9") {
            var img = "/9btl.gif"; 
            var paket = "<b>PAKET PARTY</b><br/>Herbal Ar-Rijal 9 btl<br/>+ Bonus Hajar Jahanam 3 btl";
            var paketwa = "PAKET PARTY Herbal Ar-Rijal 9 btl %2b Bonus Hajar Jahanam 3 btl";
            var haret = "<span style=\"color:red;\"><s><b>Rp765.000</b></s></span>";
            var hrg = "<b>Rp495.000</b><br/>(Gratis ongkir)";
            var bgcol = "#d00000";
        } else {
            window.location.href = "/"
        }
        document.getElementById("btncustom").style.background = bgcol;
        document.getElementById("title").style.color = bgcol;
        document.getElementById("imgheader").src = img;
        document.getElementById("namapaket").innerHTML = paket;
        document.getElementById("hargapaket").innerHTML = haret+"<br/>"+hrg;
        document.getElementById("id").value = id;
        document.getElementById("walink").href = "https://wa.me/6283891668980?text=Halo%20admin%0ASaya%20mau%20pesan%20"+paketwa;
        // Tanggal Sampai
        var today = new Date();
        var nextWeek = new Date(today.getFullYear(), today.getMonth(), today.getDate()+7);
        var dd = String(nextWeek.getDate()).padStart(2, '0');
        var mm = String(nextWeek.getMonth() + 1).padStart(2, '0');
        var namaBulan = ["Jan", "Feb", "Mar", "Apr", "Mei", "Jun","Jul", "Ags", "Sep", "Okt", "Nov", "Des"];
        var yyyy = nextWeek.getFullYear();
        var tanggalSampai = dd + ' ' + namaBulan[mm-1] + ' ' + yyyy;
        document.getElementById("tanggalSampai").value = tanggalSampai;
    </script>

    <script>
        (function() {
          'use strict';
          window.addEventListener('load', function() {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function(form) {
              form.addEventListener('submit', function(event) {
                if (form.checkValidity() === false) {
                  event.preventDefault();
                  event.stopPropagation();
                }
                form.classList.add('was-validated');
              }, false);
            });
          }, false);
        })();
    </script>

    <script src="/region.js"></script>

    <script>
        $.each(myJson.provinsi, function (index, value) {
            var provinsi_id;
            var kotkab_id;
            $("#provinsi").append('<option rel="' + index + '" value="'+value.id+'">'+value.name+'</option>');
            $("#provinsi").change(function () {
                $("#kotkab, #kecamatan").find("option:gt(0)").remove();
                $("#kotkab").find("option:first").text("- Pilih Kota / Kabupaten -");
                provinsi_id = $(this).find('option:selected').attr('rel');
                $.each(myJson.provinsi[provinsi_id].kotkab, function (index1, value1) {
                    $("#kotkab").find("option:first").text("- Pilih Kota / Kabupaten -");
                    $("#kotkab").append('<option rel="' + index1 + '" value="'+value1.id+'">'+value1.name+'</option>');
                });
            });
            $("#kotkab").change(function () {
                $("#kecamatan").find("option:gt(0)").remove();
                $("#kecamatan").find("option:first").text("- Pilih Kecamatan -");
                kotkab_id = $(this).find('option:selected').attr('rel');
                $.each(myJson.provinsi[provinsi_id].kotkab[kotkab_id].kecamatan, function (index2, value2) {
                    $("#kecamatan").find("option:first").text("- Pilih Kecamatan -");
                    $("#kecamatan").append('<option rel="' + index2 + '" value="'+value2.id+'">'+value2.name+'</option>');
                });
            });     
        });
    </script>
</body>
</html>