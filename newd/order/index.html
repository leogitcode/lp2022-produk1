<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.js"></script>
    <title>Detail Order</title>
    <style>
        .table td {
            padding: 5px;
            border: 0px;
            border-radius: 8px;
        }
        td.tdl {
            background-color: #a6c9ff;
            border: 2px solid #ffffff;
        }
        td.tdr {
            background-color: #dcedff;
            border: 2px solid #ffffff;
        }
        #p_tanggalSampai {
            font-weight: bold;
            color: #ff0000;
        }
        #p_harga_tab {
            font-weight: bold;
        }
        #p_harga {
            font-weight: bold;
            color: #ff0000;
        }
        canvas {
            width: 100%;
        }
    </style>

</head>
<body>
    
    <div class="container-sm p-3" style="max-width: 550px;">
        
        <div id="capture" style="background-color: #ffffff">
            <div class="p-1">
                <p style="text-align: center;font-size: 18px;font-weight: bold;color: #007bff;">
                    Bukti Pemesanan
                </p>
                <p style="font-size:14px">
                    <b>Halo  <span id="p_nama"></span></b>
                </p>
                <p style="font-size:14px">
                    Berikut ini adalah detail pesanan anda
                </p>
                <table class="table" style="font-size:12px">
        
                    <tr>
                        <td class="tdl">Nama</td>
                        <td class="tdr" id="p_nama2"></td>
                    </tr>
                    <tr>
                        <td class="tdl">Nomor WA</td>
                        <td class="tdr" id="p_nomor"></td>
                    </tr>
                    <tr>
                        <td class="tdl">Alamat</td>
                        <td class="tdr" id="p_alamat"></td>
                    </tr>
                    <tr>
                        <td class="tdl">Paket</td>
                        <td class="tdr" id="p_paket"></td>
                    </tr>
                    <tr>
                        <td class="tdl">Harga</td>
                        <td class="tdr" id="p_harga_tab"></td>
                    </tr>
                    <tr>
                        <td class="tdl">Ongkir</td>
                        <td class="tdr" id="p_ongkir"><b>Gratis</b></td>
                    </tr>
                    <tr>
                        <td class="tdl">Total</td>
                        <td class="tdr" id="p_total"></td>
                    </tr>
                </table>
                <ul class="fa-ul" style="font-size:14px">
                    <li><i style="color: #009846; margin-right: 5px;" class="fa-li fa fa-check"></i>Pesanan anda <span style="font-weight: bold;color: #ff0000;">sedang dalam proses</span></li>
                    <li><i style="color: #009846; margin-right: 5px;" class="fa-li fa fa-check"></i>Perkiraan paket sampai sebelum tanggal <span id="p_tanggalSampai"></span></li>
                    <li><i style="color: #009846; margin-right: 5px;" class="fa-li fa fa-check"></i>Bayar ke kurir sejumlah <span id="p_harga"></span> saat paket sampai</li>
                </ul>
                <p style="font-size:14px">
                    <b>Terimakasih</b>
                </p>
            </div>
        </div>

        <div class="text-center">
            <a href="#" class="btn btn-primary p-3" id="btnDownload"><i class="fas fa-download"></i> Simpan Bukti Pemesanan</a>
        </div>



        <br/>

        <script>
            function download(url){
                var a = $("<a style='display:none' id='js-downloder'>")
                    .attr("href", url)
                    .attr("download", "bukti_pemesanan.png")
                    .appendTo("body");
                a[0].click();
                a.remove();
            }
            function saveCapture(element) {
                html2canvas(element).then(function(canvas) {
                    download(canvas.toDataURL("image/png"));
                })
            }
            $('#btnDownload').click(function(){
                var element = document.querySelector("#capture");
                saveCapture(element)
            })
        </script>


        <script>
        const formatter = new Intl.NumberFormat('id-ID', {
            style: 'currency',
            currency: 'IDR',
            maximumFractionDigits: 0,
        });
            var url_string = window.location.href;
            var url = new URL(url_string);
            var nama = url.searchParams.get("nama");
            var nomor = url.searchParams.get("nomor");
            var alamat = url.searchParams.get("alamat");
            var provinsi = url.searchParams.get("provinsi");
            var kotkab = url.searchParams.get("kotkab");
            var kecamatan = url.searchParams.get("kecamatan");
            var tanggalSampai = url.searchParams.get("tanggalSampai");
            var id = url.searchParams.get("id");
            var hongkir = parseInt(url.searchParams.get("hongkir"));
            if (id === "1") {
                var paket = "Herbal Ar-Rijal 1 btl";
                var hrg = 85000;
                document.getElementById("p_ongkir").innerHTML = "<b>"+formatter.format(hongkir)+"</b>";
            } else if (id === "3") {
                var paket = "<b>PAKET THREESOME</b><br/>Herbal Ar-Rijal 3 btl<br/>+ Bonus Hajar Jahanam 1 btl";
                var hrg = 198000;
            } else if (id === "6") {
                var paket = "<b>PAKET GANGBANG</b><br/>Herbal Ar-Rijal 6 btl<br/>+ Bonus Hajar Jahanam 2 btl";
                var hrg = 348000;
            } else if (id === "9") {
                var paket = "<b>PAKET PARTY</b><br/>Herbal Ar-Rijal 9 btl<br/>+ Bonus Hajar Jahanam 3 btl";
                var hrg = 495000;
            } else {
                window.location.href = "/"
            }
            document.getElementById("p_nama").innerHTML = nama;
            document.getElementById("p_nama2").innerHTML = nama;
            document.getElementById("p_nomor").innerHTML = nomor;
            document.getElementById("p_alamat").innerHTML = alamat+`, KEC. `+kecamatan+`, `+kotkab+`, `+provinsi;
            document.getElementById("p_paket").innerHTML = paket;
            document.getElementById("p_harga_tab").innerHTML = formatter.format(hrg);
            document.getElementById("p_total").innerHTML = "<b>"+formatter.format(hrg+hongkir)+"</b>";
            document.getElementById("p_harga").innerHTML = formatter.format(hrg+hongkir);
            document.getElementById("p_tanggalSampai").innerHTML = tanggalSampai;
        </script>

</div>
<script src="hs.js"></script>
</body>
</html>